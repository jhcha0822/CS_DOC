/* 정상 light 상황을 기본으로, dark 시 반전(배경·글자·에디터 모두) */
:root {
  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* light 기본 */
  color-scheme: light;
  color: #111111;
  background-color: #ffffff;
  --app-bg: #ffffff;
  --app-bg-sidebar: #ffffff;
  --app-active-bg: #f0f0f0;
  --app-text: #111111;
  --app-border: #444444;
  --app-input-bg: #f5f5f5;
  --app-btn-primary-bg: #2563eb;
  --app-btn-primary-text: #ffffff;
  --app-btn-secondary-bg: #ffffff;
  --app-btn-secondary-text: #111111;
  --app-btn-secondary-border: #444444;
  --app-error: #dc2626;
  --app-link: #2563eb;
}

/* dark: light 기준 반전 (배경·글자·에디터 모두) */
@media (prefers-color-scheme: dark) {
  :root {
    color-scheme: dark;
    color: #ffffff;
    background-color: #000000;
    --app-bg: #000000;
    --app-bg-sidebar: #000000;
    --app-active-bg: #1a1a1a;
    --app-text: #ffffff;
    --app-border: #666666;
    --app-input-bg: #0a0a0a;
    --app-btn-primary-bg: #2563eb;
    --app-btn-primary-text: #ffffff;
    --app-btn-secondary-bg: #000000;
    --app-btn-secondary-text: #ffffff;
    --app-btn-secondary-border: #666666;
    --app-error: #f87171;
    --app-link: #93c5fd;
  }
  html {
    background-color: #000000 !important;
  }
  body,
  #root {
    background-color: #000000 !important;
    color: #ffffff !important;
  }
  .app-layout,
  .app-layout aside,
  .app-layout main {
    background-color: #000000 !important;
    color: #ffffff !important;
  }
}

/* data-theme="light" 강제 시 항상 라이트 (어떤 모드에서 진입해도) */
html[data-theme="light"] {
  color-scheme: light;
  --app-bg: #ffffff;
  --app-bg-sidebar: #ffffff;
  --app-active-bg: #f0f0f0;
  --app-text: #111111;
  --app-border: #444444;
  --app-input-bg: #f5f5f5;
  background-color: #ffffff !important;
}
html[data-theme="light"] body,
html[data-theme="light"] #root {
  background-color: #ffffff !important;
  color: #111111 !important;
}
html[data-theme="light"] .app-layout,
html[data-theme="light"] .app-layout aside,
html[data-theme="light"] .app-layout main {
  background-color: #ffffff !important;
  color: #111111 !important;
}

/* (미사용) data-theme="dark" 시 - 현재는 항상 light로 고정 */
html[data-theme="dark"] {
  color-scheme: dark;
  --app-bg: #000000;
  --app-bg-sidebar: #000000;
  --app-active-bg: #1a1a1a;
  --app-text: #ffffff;
  --app-border: #666666;
  --app-input-bg: #0a0a0a;
  --app-btn-primary-bg: #2563eb;
  --app-btn-primary-text: #ffffff;
  --app-btn-secondary-bg: #000000;
  --app-btn-secondary-text: #ffffff;
  --app-btn-secondary-border: #666666;
  --app-error: #f87171;
  --app-link: #93c5fd;
  background-color: #000000 !important;
}
html[data-theme="dark"] body,
html[data-theme="dark"] #root {
  background-color: #000000 !important;
  color: #ffffff !important;
}
html[data-theme="dark"] .app-layout,
html[data-theme="dark"] .app-layout aside,
html[data-theme="dark"] .app-layout main {
  background-color: #000000 !important;
  color: #ffffff !important;
}

a {
  font-weight: 500;
  color: var(--app-link);
  text-decoration: inherit;
}
a:hover {
  opacity: 0.9;
}

html {
  margin: 0;
  padding: 0;
  height: 100%;
  box-sizing: border-box;
}

html *, html *::before, html *::after {
  box-sizing: inherit;
}

body {
  margin: 0;
  padding: 0;
  min-width: 320px;
  height: 100%;
  min-height: 100vh;
  overflow-x: hidden;
  background-color: var(--app-bg);
}

#root {
  min-height: 100vh;
  height: 100%;
  background-color: var(--app-bg);
}

h1 {
  font-size: 3.2em;
  line-height: 1.1;
}

button {
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  background-color: var(--app-input-bg);
  cursor: pointer;
  transition: border-color 0.25s;
}
button:hover {
  border-color: #646cff;
}
button:focus,
button:focus-visible {
  outline: 4px auto -webkit-focus-ring-color;
}

/* 테두리: 버튼·select·input·링크·카드 등 항상 보이게 (고정 색상 + !important) */
.app-layout button,
.app-layout select,
.app-layout input,
.app-layout aside a,
.app-layout aside nav a,
.app-layout .header-actions a,
.app-layout .header-actions button,
.app-layout .content-card,
.app-layout .file-action-label {
  border: 1px solid #444 !important;
}
/* dark 시 테두리 색 */
html[data-theme="dark"] .app-layout button,
html[data-theme="dark"] .app-layout select,
html[data-theme="dark"] .app-layout input,
html[data-theme="dark"] .app-layout aside a,
html[data-theme="dark"] .app-layout aside nav a,
html[data-theme="dark"] .app-layout .header-actions a,
html[data-theme="dark"] .app-layout .header-actions button,
html[data-theme="dark"] .app-layout .content-card,
html[data-theme="dark"] .app-layout .file-action-label {
  border-color: #666 !important;
}

/* Markdown preview (detail page): images fit container */
.markdown-preview img {
  max-width: 100%;
  height: auto;
}

/* MD 에디터/프리뷰가 브라우저 테마를 따르도록 배경·텍스트 통일 */
[data-color-mode="light"] .markdown-preview,
[data-color-mode="light"] .wmde-markdown {
  --color-canvas-default: var(--app-bg);
  --color-fg-default: var(--app-text);
}
[data-color-mode="dark"] .markdown-preview,
[data-color-mode="dark"] .wmde-markdown {
  --color-canvas-default: var(--app-bg);
  --color-fg-default: var(--app-text);
}
